import Koa from "koa";
import Router from "koa-router";
import Mock from "mockjs";

const app = new Koa();
const router = new Router();

router.post("/system/user/login", (ctx) => {
  ctx.body = Mock.mock({
    code: 200,
    data: {
      token: "token_admin",
      user: {
        id: 1,
        username: "admin",
        email: "email-admin",
        phone: "phone-123456789",
      },
      permissions: ["/home"],
    },
  });
});

router.get("/system/user/refreshPermissions", (ctx) => {
  ctx.body = Mock.mock({
    code: 200,
    data: {
      token: "token_admin",
      user: {
        id: 1,
        username: "admin",
        email: "email-admin",
        phone: "phone-123456789",
      },
      permissions: ["/home"],
    },
  });
});

router.get("/system/menu/list", (ctx) => {
  ctx.body = Mock.mock({
    code: 200,
    data: [
      {
        label: "首页-mock",
        labelEn: "home",
        icon: "fluent:box-20-regular",
        key: "/home",
        rule: "/home",
      },
      {
        label: "层级",
        labelEn: "Components",
        key: "/level",
        icon: "fluent:box-20-regular",
        children: [
          {
            label: "层级1_1",
            labelEn: "level1_1",
            key: "/level/level1_1",
            rule: "/level/level1_1",
          },
          {
            label: "层级1_2",
            labelEn: "level1_2",
            key: "/level/level1_2",
            children: [
              {
                label: "层级1_2_1",
                labelEn: "level1_2_1",
                key: "/level/level1_2/level1_2_1",
                rule: "/level/level1_2/level1_2_1",
              },
              {
                label: "层级1_2_2",
                labelEn: "level1_2_2",
                key: "/level/level1_2/level1_2_2",
                rule: "/level/level1_2/level1_2_2",
              },
            ],
          },
        ],
      },
      {
        label: "动态路由",
        labelEn: "Components",
        key: "/dynamic",
        icon: "fluent:box-20-regular",
      },
      {
        label: "系统管理",
        labelEn: "System Management",
        icon: "ion:settings-outline",
        key: "/system",
        children: [
          {
            label: "用户管理",
            labelEn: "User Management",
            icon: null,
            key: "/system/user",
            rule: "/authority/user",
          },
          {
            label: "菜单管理",
            labelEn: "Menu Management",
            icon: null,
            key: "/system/menu",
            rule: "/authority/menu",
          },
          {
            label: "角色管理",
            labelEn: "Role Management",
            icon: null,
            key: "/system/role",
            rule: "/authority/role",
          },
        ],
      },
    ],
  });
});

router.get("/system/user/page", (ctx) => {
  ctx.body = Mock.mock({
    code: 200,
    data: {
      code: 200,
      items: [
        {
          username: "用户1",
          value: "1",
          id: 0,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称1",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 1,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 3,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 4,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 5,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 6,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 7,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 8,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 9,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 10,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 11,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 12,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 13,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "14",
          id: 14,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 15,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 16,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 17,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 18,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
        {
          username: "用户2",
          value: "2",
          id: 19,
          email: "user1@example.com",
          phone: 130000000000,
          status: 1,
          name: "用户名称2",
          rolesName: ["系统管理员", "普通用户"],
          url: "www.mim.zone",
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 09:30:17",
        },
      ],
      page: "1",
      pageSize: "20",
      total: 60,
    },
  });
});

router.get("/system/user/authorize", (ctx) => {
  ctx.body = Mock.mock({
    code: 200,
    message: "success",
    data: {
      defaultCheckedKeys: ["1", "3", "14", "18"],
      treeData: [
        {
          title: "首页----",
          value: "1",
          key: "1",
          type: 2,
          icon: "la:tachometer-alt",
        },
        {
          title: "系统管理",
          value: "3",
          key: "3",
          type: 1,
          icon: "ion:settings-outline",
          children: [
            {
              title: "用户管理",
              value: "14",
              key: "14",
              type: 2,
              icon: null,
              children: [
                {
                  title: "创建用户",
                  value: "18",
                  key: "18",
                  type: 3,
                  icon: null,
                },
                {
                  title: "删除用户",
                  value: "19",
                  key: "19",
                  type: 3,
                  icon: null,
                },
                {
                  title: "修改用户",
                  value: "20",
                  key: "20",
                  type: 3,
                  icon: null,
                },
                {
                  title: "用户列表",
                  value: "21",
                  key: "21",
                  type: 3,
                  icon: null,
                },
                {
                  title: "查看用户",
                  value: "22",
                  key: "22",
                  type: 3,
                  icon: null,
                },
              ],
            },
            {
              title: "菜单管理",
              value: "15",
              key: "15",
              type: 2,
              icon: null,
              children: [
                {
                  title: "菜单列表",
                  value: "23",
                  key: "23",
                  type: 3,
                  icon: null,
                },
                {
                  title: "创建菜单",
                  value: "24",
                  key: "24",
                  type: 3,
                  icon: null,
                },
                {
                  title: "删除菜单",
                  value: "25",
                  key: "25",
                  type: 3,
                  icon: null,
                },
                {
                  title: "修改菜单",
                  value: "26",
                  key: "26",
                  type: 3,
                  icon: null,
                },
                {
                  title: "查看菜单",
                  value: "27",
                  key: "27",
                  type: 3,
                  icon: null,
                },
              ],
            },
            {
              title: "角色管理",
              value: "16",
              key: "16",
              type: 2,
              icon: null,
              children: [
                {
                  title: "角色列表",
                  value: "28",
                  key: "28",
                  type: 3,
                  icon: null,
                },
                {
                  title: "创建角色",
                  value: "29",
                  key: "29",
                  type: 3,
                  icon: null,
                },
                {
                  title: "删除角色",
                  value: "30",
                  key: "30",
                  type: 3,
                  icon: null,
                },
                {
                  title: "修改角色",
                  value: "31",
                  key: "31",
                  type: 3,
                  icon: null,
                },
                {
                  title: "查看角色",
                  value: "32",
                  key: "32",
                  type: 3,
                  icon: null,
                },
              ],
            },
          ],
        },
      ],
    },
  });
});

router.get("/system/menu/page", (ctx) => {
  ctx.body = Mock.mock({
    code: 200,
    message: "success",
    data: {
      items: [
        {
          id: 1,
          label: "首页----",
          labelEn: "Dashboard",
          icon: "la:tachometer-alt",
          router: "/dashboard",
          key: "/dashboard",
          rule: "/dashboard",
          type: 2,
          order: 0,
          state: 1,
          createdAt: "2025-08-18 09:51:42",
          updatedAt: "2025-08-18 09:51:42",
        },
        {
          id: 3,
          label: "系统管理",
          labelEn: "System Management",
          icon: "ion:settings-outline",
          router: "/system",
          key: "/system",
          rule: null,
          type: 1,
          order: 2,
          state: 1,
          createdAt: "2025-08-18 09:51:42",
          updatedAt: "2025-08-18 09:51:42",
          children: [
            {
              id: 14,
              label: "用户管理",
              labelEn: "User Management",
              icon: null,
              router: "/system/user",
              key: "/system/user",
              rule: "/authority/user",
              type: 2,
              order: 0,
              state: 1,
              createdAt: "2025-08-18 09:51:42",
              updatedAt: "2025-08-18 09:51:42",
              children: [
                {
                  id: 18,
                  label: "新增",
                  labelEn: "Create",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/user/create",
                  type: 3,
                  order: 0,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
                {
                  id: 19,
                  label: "删除",
                  labelEn: "Delete",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/user/delete",
                  type: 3,
                  order: 1,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
                {
                  id: 20,
                  label: "修改",
                  labelEn: "Update",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/user/update",
                  type: 3,
                  order: 2,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
                {
                  id: 21,
                  label: "查看",
                  labelEn: "View",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/user/view",
                  type: 3,
                  order: 3,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
              ],
            },
            {
              id: 15,
              label: "菜单管理",
              labelEn: "Menu Management",
              icon: null,
              router: "/system/menu",
              key: "/system/menu",
              rule: "/authority/menu",
              type: 2,
              order: 1,
              state: 1,
              createdAt: "2025-08-18 09:51:42",
              updatedAt: "2025-08-18 09:51:42",
              children: [
                {
                  id: 22,
                  label: "新增",
                  labelEn: "Create",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/menu/create",
                  type: 3,
                  order: 0,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
                {
                  id: 23,
                  label: "删除",
                  labelEn: "Delete",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/menu/delete",
                  type: 3,
                  order: 1,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
                {
                  id: 24,
                  label: "修改",
                  labelEn: "Update",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/menu/update",
                  type: 3,
                  order: 2,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
                {
                  id: 25,
                  label: "查看",
                  labelEn: "View",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/menu/view",
                  type: 3,
                  order: 3,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
              ],
            },
            {
              id: 16,
              label: "角色管理",
              labelEn: "Role Management",
              icon: null,
              router: "/system/role",
              key: "/system/role",
              rule: "/authority/role",
              type: 2,
              order: 1,
              state: 1,
              createdAt: "2025-08-18 09:51:42",
              updatedAt: "2025-08-18 09:51:42",
              children: [
                {
                  id: 26,
                  label: "新增",
                  labelEn: "Create",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/role/create",
                  type: 3,
                  order: 0,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
                {
                  id: 27,
                  label: "删除",
                  labelEn: "Delete",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/role/delete",
                  type: 3,
                  order: 1,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
                {
                  id: 28,
                  label: "修改",
                  labelEn: "Update",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/role/update",
                  type: 3,
                  order: 2,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
                {
                  id: 29,
                  label: "查看",
                  labelEn: "View",
                  icon: null,
                  router: null,
                  key: null,
                  rule: "/authority/role/view",
                  type: 3,
                  order: 3,
                  state: 1,
                  createdAt: "2025-08-18 09:51:42",
                  updatedAt: "2025-08-18 09:51:42",
                },
              ],
            },
          ],
        },
      ],
      page: 1,
      pageSize: 20,
      total: 33,
    },
  });
});

router.get("/system/role/page", (ctx) => {
  ctx.body = Mock.mock({
    code: 200,
    message: "success",
    data: {
      items: [
        {
          id: 1,
          name: "admin",
          description: "系统管理员",
          permissionCount: 30,
          menuCount: 37,
          createdAt: "2025-01-01 00:00:00",
          updatedAt: "2025-08-20 02:49:45",
        },
      ],
      page: 1,
      pageSize: 20,
      total: 1,
    },
  });
});

app.use(router.routes());
app.listen(8082, () => console.log("Mock 服务已启动: http://localhost:8082"));
